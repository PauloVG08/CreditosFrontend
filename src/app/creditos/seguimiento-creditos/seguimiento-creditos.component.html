<h3 class="titulo">Seguimiento de Créditos</h3>
<div class="col-12 card shadow mb-4 p-3">
    <fieldset class="d-flex align-items-center justify-content-between">
        <div class="alert alert-warning m-0" role="alert">
            En este módulo podrá dar seguimiento a los distintos créditos que se tengan.
        </div>
    </fieldset>
</div>
<div class="card shadow mb-4 p-3" id="spacesTable">
    <div class="card-header py-3 d-flex justify-content-between">
        <h6 class="m-0 font-weight-bold"><i class="fa fa-folder"></i>&nbsp;Listado de Créditos</h6>
    </div>
    <fieldset>
        <div class="table-wrapper" style="margin-top: 20px; font-size: 13px;">
            <table class="table table-bordered table-hover">
                <thead>
                    <tr class="text-center">
                        <th class="headerTable-top-left">Nombre Cliente</th>
                        <th>Régimen Fiscal</th>
                        <th>Periodicidad</th>
                        <th>Monto</th>
                        <th>Número Pagos</th>
                        <th class="headerTable-top-right">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let o of creditos" class="text-center">
                        <td>{{o.nombreCliente}}</td>
                        <td>{{o.regimenFiscal}}</td>
                        <td>{{o.periodicidad}}</td>
                        <td>{{o.monto}}</td>
                        <td>{{o.numPagos}}</td>
                        <td class="d-flex align-items-center justify-content-center">
                            <ul class="botonp list-unstyled m-0">
                                <li *ngIf="o.estatus == 1" class="icon-content">
                                    <a aria-label="Asignar Promotor" data-social="agregar" (click)="openModalPromotor(o)">
                                        <div class="filled"></div>
                                        <i class="fas fa-user-plus"></i>
                                    </a>
                                    <div class="tooltip">Asignar promotor</div>
                                </li>
                                <li *ngIf="o.estatus == 1" class="icon-content">
                                    <a aria-label="Asignar Avales" data-social="agregar" (click)="openModalAval(o)">
                                        <div class="filled"></div>
                                        <i class="fas fa-handshake"></i>
                                    </a>
                                    <div class="tooltip">Avales</div>
                                </li>
                                <li *ngIf="o.estatus == 1" class="icon-content">
                                    <a aria-label="Asignar Obligados" data-social="limpiar" (click)="openModalObligados(o)">
                                        <div class="filled"></div>
                                        <i class="fas fa-users"></i>
                                    </a>
                                    <div class="tooltip">Obligados</div>
                                </li>
                                <li class="icon-content">
                                    <a aria-label="Ver Detalles" data-social="general" (click)="openModalDetalles(o)">
                                        <div class="filled"></div>
                                        <i class="fas fa-clipboard-list"></i>
                                    </a>
                                    <div class="tooltip">Detalles</div>
                                </li>
                                <li *ngIf="o.estatus == 1" class="icon-content">
                                    <a aria-label="agregar" data-social="agregar" (click)="openModalFirma(o)">
                                        <div class="filled"></div>
                                        <i class="fas fa-signature"></i>
                                    </a>
                                    <div class="tooltip">Firmar</div>
                                </li>
                                <li *ngIf="o.estatus == 2" class="icon-content">
                                    <a aria-label="agregar" data-social="agregar" (click)="openModalAceptar(o)">
                                        <div class="filled"></div>
                                        <i class="fas fa-check"></i>
                                    </a>
                                    <div class="tooltip">Aceptar</div>
                                </li>
                                &nbsp;
                                <li *ngIf="o.estatus != 3" class="icon-content">
                                    <a aria-label="Eliminar" data-social="eliminar" (click)="eliminar(o)">
                                        <div class="filled"></div>
                                        <i class="fa fa-trash fa-lg" aria-hidden="true"></i>
                                    </a>
                                    <div class="tooltip">Eliminar</div>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </fieldset>
</div>

<!-- MODAL DE LOS AVALES -->
<div class="modal fade" id="staticBackdrop" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" (hidden.bs.modal)="onModalClose()">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="staticBackdropLabel">Registro de Avales</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <div class="inputs-container mt-4">
                        <div class="floating-label">
                            <select class="inputM" id="regimenFiscal" [(ngModel)]="regimenFiscal" (change)="onRegimenFiscalChange($event)">
                                <option value="" disabled>Selecciona Régimen Fiscal</option>
                                <option value="FISICA">FISICA</option>
                                <option value="MORAL">MORAL</option>
                            </select>
                            <label for="regimenFiscal">Régimen Fiscal</label>
                        </div>
                    </div>
                    <!-- Formulario Física -->
                    <div *ngIf="mostrarFisica">
                        <form [formGroup]="personaForm" novalidate (ngSubmit)="guardarAval()">
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombre" formControlName="nombre" placeholder="Nombre*">
                                    <label for="nombre">Nombre*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="apellidoPaterno" formControlName="apellidoPaterno" placeholder="Apellido Paterno*">
                                    <label for="apellidoPaterno">Apellido Paterno*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="apellidoMaterno" formControlName="apellidoMaterno" placeholder="Apellido Materno*">
                                    <label for="apellidoMaterno">Apellido Materno*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="date" class="inputM" id="fechaNacimiento" formControlName="fechaNacimiento" placeholder="Fecha Nacimiento">
                                    <label for="fechaNacimiento">Fecha Nacimiento*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisNacimiento" formControlName="paisNacimiento" placeholder="País Nacimiento*">
                                    <label for="paisNacimiento">País Nacimiento*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoNacimiento" formControlName="estadoNacimiento" placeholder="Estado Nacimiento*">
                                    <label for="estadoNacimiento">Estado Nacimiento*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="genero" formControlName="genero" placeholder="Género*">
                                    <label for="genero">Género*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="rfc" formControlName="rfc" placeholder="RFC*">
                                    <label for="rfc">RFC*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="curp" formControlName="curp" placeholder="CURP*">
                                    <label for="curp">CURP*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="claveElector" formControlName="claveElector" placeholder="Clave Elector">
                                    <label for="claveElector">Clave Elector</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nacionalidad" formControlName="nacionalidad" placeholder="Nacionalidad*">
                                    <label for="nacionalidad">Nacionalidad*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoCivil" formControlName="estadoCivil" placeholder="Estado Civil">
                                    <label for="estadoCivil">Estado Civil</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="regimenMatrimonial" formControlName="regimenMatrimonial" placeholder="Régimen Matrimonial">
                                    <label for="regimenMatrimonial">Régimen Matrimonial</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombreConyuge" formControlName="nombreConyuge" placeholder="Nombre Cónyuge">
                                    <label for="nombreConyuge">Nombre Cónyuge</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="calle" formControlName="calle" placeholder="Calle*">
                                    <label for="calle">Calle*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numExterior" formControlName="numExterior" placeholder="Número Exterior*">
                                    <label for="numExterior">Número Exterior*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numInterior" formControlName="numInterior" placeholder="Número Interior">
                                    <label for="numInterior">Número Interior</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="colonia" formControlName="colonia" placeholder="Colonia*">
                                    <label for="colonia">Colonia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="codigoPostal" formControlName="codigoPostal" placeholder="Código Postal*">
                                    <label for="codigoPostal">Código Postal*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisResidencia" formControlName="paisResidencia" placeholder="País Residencia*">
                                    <label for="paisResidencia">País Residencia*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoResidencia" formControlName="estadoResidencia" placeholder="Estado Residencia*">
                                    <label for="estadoResidencia">Estado Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="ciudadResidencia" formControlName="ciudadResidencia" placeholder="Ciudad Residencia*">
                                    <label for="ciudadResidencia">Ciudad Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="email" class="inputM" id="email" formControlName="email" placeholder="Email*">
                                    <label for="email">Email*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="tel" class="inputM" id="telefono" formControlName="telefono" placeholder="Teléfono*">
                                    <label for="telefono">Teléfono*</label>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Formulario Moral -->
                    <div *ngIf="mostrarMoral">
                        <form [formGroup]="personaMoralForm" novalidate (ngSubmit)="guardarAval()">
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="razonSocial" formControlName="razonSocial" placeholder="Razón Social*">
                                    <label for="razonSocial">Razón Social*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="razonComercial" formControlName="razonComercial" placeholder="Razón Comercial*">
                                    <label for="razonComercial">Razón Comercial*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="date" class="inputM" id="fechaConstitucion" formControlName="fechaConstitucion" placeholder="Fecha Constitución">
                                    <label for="fechaConstitucion">Fecha Constitución</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="rfc" formControlName="rfc" placeholder="RFC*">
                                    <label for="rfc">RFC*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nacionalidad" formControlName="nacionalidad" placeholder="Nacionalidad*">
                                    <label for="nacionalidad">Nacionalidad*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisRegistro" formControlName="paisRegistro" placeholder="País Registro*">
                                    <label for="paisRegistro">País Registro*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoRegistro" formControlName="estadoRegistro" placeholder="Estado Registro*">
                                    <label for="estadoRegistro">Estado Registro*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="ciudadRegistro" formControlName="ciudadRegistro" placeholder="Ciudad Registro*">
                                    <label for="ciudadRegistro">Ciudad Registro*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numEscritura" formControlName="numEscritura" placeholder="Número Escritura*">
                                    <label for="numEscritura">Número Escritura*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="date" class="inputM" id="fechaRppc" formControlName="fechaRppc" placeholder="Fecha RPPC">
                                    <label for="fechaRppc">Fecha RPPC</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombreNotario" formControlName="nombreNotario" placeholder="Nombre Notario*">
                                    <label for="nombreNotario">Nombre Notario*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numNotario" formControlName="numNotario" placeholder="Número Notario*">
                                    <label for="numNotario">Número Notario*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="folioMercantil" formControlName="folioMercantil" placeholder="Folio Mercantil*">
                                    <label for="folioMercantil">Folio Mercantil*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="calle" formControlName="calle" placeholder="Calle*">
                                    <label for="calle">Calle*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numExterior" formControlName="numExterior" placeholder="Número Exterior*">
                                    <label for="numExterior">Número Exterior*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numInterior" formControlName="numInterior" placeholder="Número Interior">
                                    <label for="numInterior">Número Interior</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="colonia" formControlName="colonia" placeholder="Colonia*">
                                    <label for="colonia">Colonia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="codigoPostal" formControlName="codigoPostal" placeholder="Código Postal*">
                                    <label for="codigoPostal">Código Postal*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisResidencia" formControlName="paisResidencia" placeholder="País Residencia*">
                                    <label for="paisResidencia">País Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoResidencia" formControlName="estadoResidencia" placeholder="Estado Residencia*">
                                    <label for="estadoResidencia">Estado Residencia*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="ciudadResidencia" formControlName="ciudadResidencia" placeholder="Ciudad Residencia*">
                                    <label for="ciudadResidencia">Ciudad Residencia*</label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer d-flex justify-content-center">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        <button type="button" class="btn btn-success" (click)="guardarAval()">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- MODAL DE LOS OBLIGADOS -->
<div class="modal fade" id="modalObligados" tabindex="-1" aria-labelledby="modalObligados" aria-hidden="true" (hidden.bs.modal)="onModalClose()">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="modalObligados">Registro de obligados</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <div class="inputs-container mt-4">
                        <div class="floating-label">
                            <select class="inputM" id="regimenFiscal" [(ngModel)]="regimenFiscal" (change)="onRegimenFiscalChange($event)">
                                <option value="" disabled>Selecciona Régimen Fiscal</option>
                                <option value="FISICA">FISICA</option>
                                <option value="MORAL">MORAL</option>
                            </select>
                            <label for="regimenFiscal">Régimen Fiscal</label>
                        </div>
                    </div>
                    <!-- Formulario Física -->
                    <div *ngIf="mostrarFisica">
                        <form [formGroup]="personaForm" novalidate (ngSubmit)="guardarObligado()">
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombre" formControlName="nombre" placeholder="Nombre*">
                                    <label for="nombre">Nombre*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="apellidoPaterno" formControlName="apellidoPaterno" placeholder="Apellido Paterno*">
                                    <label for="apellidoPaterno">Apellido Paterno*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="apellidoMaterno" formControlName="apellidoMaterno" placeholder="Apellido Materno*">
                                    <label for="apellidoMaterno">Apellido Materno*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="date" class="inputM" id="fechaNacimiento" formControlName="fechaNacimiento" placeholder="Fecha Nacimiento">
                                    <label for="fechaNacimiento">Fecha Nacimiento*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisNacimiento" formControlName="paisNacimiento" placeholder="País Nacimiento*">
                                    <label for="paisNacimiento">País Nacimiento*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoNacimiento" formControlName="estadoNacimiento" placeholder="Estado Nacimiento*">
                                    <label for="estadoNacimiento">Estado Nacimiento*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="genero" formControlName="genero" placeholder="Género*">
                                    <label for="genero">Género*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="rfc" formControlName="rfc" placeholder="RFC*">
                                    <label for="rfc">RFC*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="curp" formControlName="curp" placeholder="CURP*">
                                    <label for="curp">CURP*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="claveElector" formControlName="claveElector" placeholder="Clave Elector">
                                    <label for="claveElector">Clave Elector</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nacionalidad" formControlName="nacionalidad" placeholder="Nacionalidad*">
                                    <label for="nacionalidad">Nacionalidad*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoCivil" formControlName="estadoCivil" placeholder="Estado Civil">
                                    <label for="estadoCivil">Estado Civil</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="regimenMatrimonial" formControlName="regimenMatrimonial" placeholder="Régimen Matrimonial">
                                    <label for="regimenMatrimonial">Régimen Matrimonial</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombreConyuge" formControlName="nombreConyuge" placeholder="Nombre Cónyuge">
                                    <label for="nombreConyuge">Nombre Cónyuge</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="calle" formControlName="calle" placeholder="Calle*">
                                    <label for="calle">Calle*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numExterior" formControlName="numExterior" placeholder="Número Exterior*">
                                    <label for="numExterior">Número Exterior*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numInterior" formControlName="numInterior" placeholder="Número Interior">
                                    <label for="numInterior">Número Interior</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="colonia" formControlName="colonia" placeholder="Colonia*">
                                    <label for="colonia">Colonia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="codigoPostal" formControlName="codigoPostal" placeholder="Código Postal*">
                                    <label for="codigoPostal">Código Postal*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisResidencia" formControlName="paisResidencia" placeholder="País Residencia*">
                                    <label for="paisResidencia">País Residencia*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoResidencia" formControlName="estadoResidencia" placeholder="Estado Residencia*">
                                    <label for="estadoResidencia">Estado Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="ciudadResidencia" formControlName="ciudadResidencia" placeholder="Ciudad Residencia*">
                                    <label for="ciudadResidencia">Ciudad Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="email" class="inputM" id="email" formControlName="email" placeholder="Email*">
                                    <label for="email">Email*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="tel" class="inputM" id="telefono" formControlName="telefono" placeholder="Teléfono*">
                                    <label for="telefono">Teléfono*</label>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Formulario Moral -->
                    <div *ngIf="mostrarMoral">
                        <form [formGroup]="personaMoralForm" novalidate (ngSubmit)="guardarObligado()">
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="razonSocial" formControlName="razonSocial" placeholder="Razón Social*">
                                    <label for="razonSocial">Razón Social*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="razonComercial" formControlName="razonComercial" placeholder="Razón Comercial*">
                                    <label for="razonComercial">Razón Comercial*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="date" class="inputM" id="fechaConstitucion" formControlName="fechaConstitucion" placeholder="Fecha Constitución">
                                    <label for="fechaConstitucion">Fecha Constitución</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="rfc" formControlName="rfc" placeholder="RFC*">
                                    <label for="rfc">RFC*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nacionalidad" formControlName="nacionalidad" placeholder="Nacionalidad*">
                                    <label for="nacionalidad">Nacionalidad*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisRegistro" formControlName="paisRegistro" placeholder="País Registro*">
                                    <label for="paisRegistro">País Registro*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoRegistro" formControlName="estadoRegistro" placeholder="Estado Registro*">
                                    <label for="estadoRegistro">Estado Registro*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="ciudadRegistro" formControlName="ciudadRegistro" placeholder="Ciudad Registro*">
                                    <label for="ciudadRegistro">Ciudad Registro*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numEscritura" formControlName="numEscritura" placeholder="Número Escritura*">
                                    <label for="numEscritura">Número Escritura*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="date" class="inputM" id="fechaRppc" formControlName="fechaRppc" placeholder="Fecha RPPC">
                                    <label for="fechaRppc">Fecha RPPC</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombreNotario" formControlName="nombreNotario" placeholder="Nombre Notario*">
                                    <label for="nombreNotario">Nombre Notario*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numNotario" formControlName="numNotario" placeholder="Número Notario*">
                                    <label for="numNotario">Número Notario*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="folioMercantil" formControlName="folioMercantil" placeholder="Folio Mercantil*">
                                    <label for="folioMercantil">Folio Mercantil*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="calle" formControlName="calle" placeholder="Calle*">
                                    <label for="calle">Calle*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numExterior" formControlName="numExterior" placeholder="Número Exterior*">
                                    <label for="numExterior">Número Exterior*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numInterior" formControlName="numInterior" placeholder="Número Interior">
                                    <label for="numInterior">Número Interior</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="colonia" formControlName="colonia" placeholder="Colonia*">
                                    <label for="colonia">Colonia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="codigoPostal" formControlName="codigoPostal" placeholder="Código Postal*">
                                    <label for="codigoPostal">Código Postal*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisResidencia" formControlName="paisResidencia" placeholder="País Residencia*">
                                    <label for="paisResidencia">País Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoResidencia" formControlName="estadoResidencia" placeholder="Estado Residencia*">
                                    <label for="estadoResidencia">Estado Residencia*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="ciudadResidencia" formControlName="ciudadResidencia" placeholder="Ciudad Residencia*">
                                    <label for="ciudadResidencia">Ciudad Residencia*</label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer d-flex justify-content-center">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        <button type="button" class="btn btn-success" (click)="guardarObligado()">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de detalles -->
<div class="modal fade" id="modalDetalles" tabindex="-1" aria-labelledby="modalDetallesLabel" aria-hidden="true" (hidden.bs.modal)="onModalCloseDetalles()">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="modalDetallesLabel">Detalles crédito</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <div class="card-body">
                        <div *ngIf="mostrarPromotor">
                            <h3>Tu promotor es: {{ nombrePromotor }}</h3>
                        </div>
                        <div *ngIf="!mostrarPromotor">
                            <h3>Aún no has asignado un promotor</h3>
                        </div>
                        <div class="mt-4" *ngIf="creditoSeleccionado.avals && creditoSeleccionado.avals.length > 0">
                            <h3>Tabla de avales</h3>
                            <table class="table table-striped mt-2">
                                <thead>
                                    <tr class="text-center">
                                        <th class="headerTable-top-left">Nombre</th>
                                        <th>Tipo</th>
                                        <th class="headerTable-top-right">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let aval of creditoSeleccionado.avals" class="text-center">
                                        <td>{{ aval.idPersonaNavigation?.nombre || aval.idPersonaMoralNavigation?.razonSocial }}</td>
                                        <td>{{ aval.idPersonaNavigation ? 'Física' : 'Moral' }}</td>
                                        <td class="text-center">
                                            <button class="btn btn-primary btn-sm me-2" (click)="openModalEditar(aval, 'aval')">Editar</button>
                                            <button class="btn btn-danger btn-sm" (click)="eliminarAvalPregunta(aval)">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-4" *ngIf="creditoSeleccionado.obligados && creditoSeleccionado.obligados.length > 0">
                            <h3>Tabla de obligados</h3>
                            <table class="table table-striped mt-2">
                                <thead>
                                    <tr class="text-center">
                                        <th class="headerTable-top-left">Nombre</th>
                                        <th>Tipo</th>
                                        <th class="headerTable-top-right">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let obligado of creditoSeleccionado.obligados" class="text-center">
                                        <td>{{ obligado.idPersonaNavigation?.nombre || obligado.idPersonaMoralNavigation?.razonSocial }}</td>
                                        <td>{{ obligado.idPersonaNavigation ? 'Física' : 'Moral' }}</td>
                                        <td class="text-center">
                                            <button class="btn btn-primary btn-sm me-2" (click)="openModalEditar(obligado, 'obligado')">Editar</button>
                                            <button class="btn btn-danger btn-sm" (click)="eliminarObligadoPregunta(obligado)">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Editar fisicas -->
<div class="modal fade" id="modalEditarFisicas" tabindex="-1" aria-labelledby="modalEditarFisicas" aria-hidden="true" (hidden.bs.modal)="onModalClose()">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="modalEditarFisicas">Editar Fisica</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <!-- Formulario Física -->
                    <!-- <div *ngIf="mostrarFisica"> -->
                        <form [formGroup]="personaForm" novalidate (ngSubmit)="guardarEdicion()">
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombre" formControlName="nombre" placeholder="Nombre*">
                                    <label for="nombre">Nombre*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="apellidoPaterno" formControlName="apellidoPaterno" placeholder="Apellido Paterno*">
                                    <label for="apellidoPaterno">Apellido Paterno*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="apellidoMaterno" formControlName="apellidoMaterno" placeholder="Apellido Materno*">
                                    <label for="apellidoMaterno">Apellido Materno*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="date" class="inputM" id="fechaNacimiento" formControlName="fechaNacimiento" placeholder="Fecha Nacimiento">
                                    <label for="fechaNacimiento">Fecha Nacimiento*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisNacimiento" formControlName="paisNacimiento" placeholder="País Nacimiento*">
                                    <label for="paisNacimiento">País Nacimiento*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoNacimiento" formControlName="estadoNacimiento" placeholder="Estado Nacimiento*">
                                    <label for="estadoNacimiento">Estado Nacimiento*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="genero" formControlName="genero" placeholder="Género*">
                                    <label for="genero">Género*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="rfc" formControlName="rfc" placeholder="RFC*">
                                    <label for="rfc">RFC*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="curp" formControlName="curp" placeholder="CURP*">
                                    <label for="curp">CURP*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="claveElector" formControlName="claveElector" placeholder="Clave Elector">
                                    <label for="claveElector">Clave Elector</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nacionalidad" formControlName="nacionalidad" placeholder="Nacionalidad*">
                                    <label for="nacionalidad">Nacionalidad*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoCivil" formControlName="estadoCivil" placeholder="Estado Civil">
                                    <label for="estadoCivil">Estado Civil</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="regimenMatrimonial" formControlName="regimenMatrimonial" placeholder="Régimen Matrimonial">
                                    <label for="regimenMatrimonial">Régimen Matrimonial</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="nombreConyuge" formControlName="nombreConyuge" placeholder="Nombre Cónyuge">
                                    <label for="nombreConyuge">Nombre Cónyuge</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="calle" formControlName="calle" placeholder="Calle*">
                                    <label for="calle">Calle*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numExterior" formControlName="numExterior" placeholder="Número Exterior*">
                                    <label for="numExterior">Número Exterior*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="numInterior" formControlName="numInterior" placeholder="Número Interior">
                                    <label for="numInterior">Número Interior</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="colonia" formControlName="colonia" placeholder="Colonia*">
                                    <label for="colonia">Colonia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="codigoPostal" formControlName="codigoPostal" placeholder="Código Postal*">
                                    <label for="codigoPostal">Código Postal*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="paisResidencia" formControlName="paisResidencia" placeholder="País Residencia*">
                                    <label for="paisResidencia">País Residencia*</label>
                                </div>
                            </div>
                            <div class="inputs-container mt-4">
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="estadoResidencia" formControlName="estadoResidencia" placeholder="Estado Residencia*">
                                    <label for="estadoResidencia">Estado Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="text" class="inputM" id="ciudadResidencia" formControlName="ciudadResidencia" placeholder="Ciudad Residencia*">
                                    <label for="ciudadResidencia">Ciudad Residencia*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="email" class="inputM" id="email" formControlName="email" placeholder="Email*">
                                    <label for="email">Email*</label>
                                </div>
                                <div class="floating-label">
                                    <input type="tel" class="inputM" id="telefono" formControlName="telefono" placeholder="Teléfono*">
                                    <label for="telefono">Teléfono*</label>
                                </div>
                            </div>
                        </form>
                        <div class="modal-footer d-flex justify-content-center">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                            <button type="button" class="btn btn-success" (click)="guardarEdicion()">Guardar</button>
                        </div>
                    <!-- </div> -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Editar morales -->
<div class="modal fade" id="editarMorales" tabindex="-1" aria-labelledby="editarMorales" aria-hidden="true" (hidden.bs.modal)="onModalClose()">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="editarMorales">Editar Morales</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <form [formGroup]="personaMoralForm" novalidate (ngSubmit)="guardarEdicion()">
                        <div class="inputs-container mt-4">
                            <div class="floating-label">
                                <input type="text" class="inputM" id="razonSocial" formControlName="razonSocial" placeholder="Razón Social*">
                                <label for="razonSocial">Razón Social*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="razonComercial" formControlName="razonComercial" placeholder="Razón Comercial*">
                                <label for="razonComercial">Razón Comercial*</label>
                            </div>
                            <div class="floating-label">
                                <input type="date" class="inputM" id="fechaConstitucion" formControlName="fechaConstitucion" placeholder="Fecha Constitución">
                                <label for="fechaConstitucion">Fecha Constitución</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="rfc" formControlName="rfc" placeholder="RFC*">
                                <label for="rfc">RFC*</label>
                            </div>
                        </div>
                        <div class="inputs-container mt-4">
                            <div class="floating-label">
                                <input type="text" class="inputM" id="nacionalidad" formControlName="nacionalidad" placeholder="Nacionalidad*">
                                <label for="nacionalidad">Nacionalidad*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="paisRegistro" formControlName="paisRegistro" placeholder="País Registro*">
                                <label for="paisRegistro">País Registro*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="estadoRegistro" formControlName="estadoRegistro" placeholder="Estado Registro*">
                                <label for="estadoRegistro">Estado Registro*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="ciudadRegistro" formControlName="ciudadRegistro" placeholder="Ciudad Registro*">
                                <label for="ciudadRegistro">Ciudad Registro*</label>
                            </div>
                        </div>
                        <div class="inputs-container mt-4">
                            <div class="floating-label">
                                <input type="text" class="inputM" id="numEscritura" formControlName="numEscritura" placeholder="Número Escritura*">
                                <label for="numEscritura">Número Escritura*</label>
                            </div>
                            <div class="floating-label">
                                <input type="date" class="inputM" id="fechaRppc" formControlName="fechaRppc" placeholder="Fecha RPPC">
                                <label for="fechaRppc">Fecha RPPC</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="nombreNotario" formControlName="nombreNotario" placeholder="Nombre Notario*">
                                <label for="nombreNotario">Nombre Notario*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="numNotario" formControlName="numNotario" placeholder="Número Notario*">
                                <label for="numNotario">Número Notario*</label>
                            </div>
                        </div>
                        <div class="inputs-container mt-4">
                            <div class="floating-label">
                                <input type="text" class="inputM" id="folioMercantil" formControlName="folioMercantil" placeholder="Folio Mercantil*">
                                <label for="folioMercantil">Folio Mercantil*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="calle" formControlName="calle" placeholder="Calle*">
                                <label for="calle">Calle*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="numExterior" formControlName="numExterior" placeholder="Número Exterior*">
                                <label for="numExterior">Número Exterior*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="numInterior" formControlName="numInterior" placeholder="Número Interior">
                                <label for="numInterior">Número Interior</label>
                            </div>
                        </div>
                        <div class="inputs-container mt-4">
                            <div class="floating-label">
                                <input type="text" class="inputM" id="colonia" formControlName="colonia" placeholder="Colonia*">
                                <label for="colonia">Colonia*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="codigoPostal" formControlName="codigoPostal" placeholder="Código Postal*">
                                <label for="codigoPostal">Código Postal*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="paisResidencia" formControlName="paisResidencia" placeholder="País Residencia*">
                                <label for="paisResidencia">País Residencia*</label>
                            </div>
                            <div class="floating-label">
                                <input type="text" class="inputM" id="estadoResidencia" formControlName="estadoResidencia" placeholder="Estado Residencia*">
                                <label for="estadoResidencia">Estado Residencia*</label>
                            </div>
                        </div>
                        <div class="inputs-container mt-4">
                            <div class="floating-label">
                                <input type="text" class="inputM" id="ciudadResidencia" formControlName="ciudadResidencia" placeholder="Ciudad Residencia*">
                                <label for="ciudadResidencia">Ciudad Residencia*</label>
                            </div>
                        </div>
                    </form>
                    <div class="modal-footer d-flex justify-content-center">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        <button type="button" class="btn btn-success" (click)="guardarEdicion()">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de firma -->
<div class="modal fade" id="firmarCredito" tabindex="-1" aria-labelledby="firmarCredito" aria-hidden="true" (hidden.bs.modal)="onModalClose()">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="firmarCredito">Firmar crédito</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <div class="inputs-container mt-4">
                        <div class="floating-label">
                            <input type="date" class="inputM" id="fechaFirma" [(ngModel)]="fechaFirma" placeholder="Fecha Firma">
                            <label for="fechaFirma">Fecha Firma</label>
                        </div>                        
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-success" (click)="guardarFirma()" >Firmar Crédito</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de aceptación -->
<div class="modal fade" id="aceptarCredito" tabindex="-1" aria-labelledby="aceptarCredito" aria-hidden="true" (hidden.bs.modal)="onModalClose()">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="aceptarCredito">Activar crédito</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <div class="inputs-container mt-4">
                        <div class="floating-label">
                            <input type="date" class="inputM" id="fechaActivacion" [(ngModel)]="fechaActivacion" placeholder="Fecha Activación">
                            <label for="fechaActivacion">Fecha Activación</label>
                        </div>                        
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-success" (click)="guardarActivacion()">Activar Crédito</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de promotor -->
<div class="modal fade" id="promotorModal" tabindex="-1" aria-labelledby="promotorModal" aria-hidden="true" (hidden.bs.modal)="onModalClosePromotor()">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-center position-relative">
                <h1 class="modal-title fs-5 w-100 text-center" id="promotorModal">Asignar Promotor</h1>
                <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card shadow-lg p-4">
                    <div class="d-flex justify-content-center">
                        <div class="w-50 floating-label">
                            <select class="inputM" id="promotorSelect" [(ngModel)]="idPromotorSeleccionado">
                                <!-- <option value="" disabled>Seleccionar Promotor</option> -->
                                <option *ngFor="let usuario of usuarios" [value]="usuario.idUsuario">
                                    {{ usuario.nombre }} {{ usuario.apellidoPaterno }} {{ usuario.apellidoMaterno }}
                                </option>
                            </select>
                            <label for="promotorSelect">Seleccionar Promotor</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-success" (click)="asignarPromotor()">Asignar promotor</button>
                </div>
            </div>
        </div>
    </div>
</div>


